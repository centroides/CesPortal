<!DOCTYPE html>
<html lang="en">

<head>
   <meta charset="UTF-8" />
   <meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1" />
   <title>Centroid Engineering Solutions</title>
   <link rel="icon" type="image/jpeg" href="static/ces_logo.png" />
   <link rel="stylesheet" href="../static/res_style.css" />
   <link rel="stylesheet"
      href="https://maxst.icons8.com/vue-static/landings/line-awesome/line-awesome/1.3.0/css/line-awesome.min.css" />
   <link href="https://fonts.googleapis.com/icon?family=Material+Icons+Outlined" rel="stylesheet" />
   <!-- <script src="https://kit.fontawesome.com/f8e1a90484.js" crossorigin="anonymous"></script> -->
   <script type="module" src="https://unpkg.com/ionicons@5.5.2/dist/ionicons/ionicons.esm.js"></script>
   <script nomodule src="https://unpkg.com/ionicons@5.5.2/dist/ionicons/ionicons.js"></script>
   <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css" rel="stylesheet" />
   <link href="https://cdn.jsdelivr.net/npm/font-awesome@6.5.0/css/all.min.css" rel="stylesheet" />

</head>

<body>

   <input type="checkbox" id="menu-toggle">

   <div class="sidebar">

      <div class="side-header">
         <h3>C<span>entroid</span></h3>
      </div>

      <div class="side-content">

         <div class="profile">
            <div class="profile-img bg-img" style="background-image: url(../static/1.png)"></div>
            <h4>{{user['name']}}</h4>
            <small>{{department_code}}</small>
         </div>

         <div class="side-menu">
            <ul>

               {% if department_code == 1000 %}
               <li>
                  <a href="/admin">
                     <span class="fa-solid fa-user-tie"></span>
                     <small>Admin</small>
                  </a>
               </li>
               {% endif %}

               {% if user_access['Accounts'] == 'On' %}
               <li>
                  <a href="/accounts">
                     <span class="fa-solid fa-file-invoice-dollar"></span>
                     <small>Accounts</small>
                  </a>
               </li>
               {% endif %}
               {% if user_access['toggleEnquiry'] == 'On' %}
               <li>
                  <a href="/admin_enquiry">
                     <span class="fa-solid fa-handshake"></span>
                     <small>Leads</small>
                  </a>
               </li>
               {% endif %}
               {% if user_access['toggleHR'] == 'On' %}
               <li>
                  <a href="/hr">
                     <span class="fa-solid fa-user-plus"></span>
                     <small>HR</small>
                  </a>
               </li>
               {% endif %}
               {% if user_access['togglePlanner'] == 'On' %}
               <li>
                  <a href="/planner">
                     <span class="fa-solid fa-calendar-check"></span>
                     <small>Planner</small>
                  </a>
               </li>
               {% endif %}
               {% if user_access['toggleProfile'] == 'On' %}
               <li>
                  <a href="/profile">
                     <span class="fa-solid fa-user"></span>
                     <small>Profile</small>
                  </a>
               </li>
               {% endif %}
               {% if user_access['toggleProjects'] == 'On' %}
               <li>
                  <a href="/projects" class="active">
                     <span class="fa-solid fa-chart-simple"></span>
                     <small>Project</small>
                  </a>
               </li>
               {% endif %}
               {% if user_access['togglePurchase'] == 'On' %}
               <li>
                  <a href="/purchase">
                     <span class="fa-solid fa-cart-shopping"></span>
                     <small>Purchase</small>
                  </a>
               </li>
               {% endif %}

               {% if user_access['toggleResources'] == 'On' %}
               <li>
                  <a href="/resources">
                     <span class="fa-solid fa-recycle"></span>
                     <small>Resources</small>
                  </a>
               </li>
               {% endif %}

               {% if department_code == 1000 %}
               <li>
                  <a href="/settings">
                     <span class="fa-solid fa-gears"></span>
                     <small>Settings</small>
                  </a>
               </li>
               {% endif %}

               <li>
                  <a href="{{ url_for('logout') }}">
                     <span class="fa-solid fa-right-from-bracket"></span>
                     <small>Log Out</small>
                  </a>
               </li>
            </ul>
         </div>

      </div>

   </div>

   <div class="main-content">

      <div id="pageLoader">
         <div class="loader"></div>
         <script>
            window.addEventListener("load", function () {
               document.getElementById("pageLoader").style.display = "none";
            });
         </script>

         <style>
            #pageLoader {
               position: fixed;
               width: 100vw;
               height: 100vh;
               background: white;
               z-index: 9999;
               display: flex;
               justify-content: center;
               align-items: center;
            }

            .loader {
               border: 8px solid #f3f3f3;
               /* Light grey */
               border-top: 8px solid #3498db;
               /* Blue */
               border-radius: 50%;
               width: 60px;
               height: 60px;
               animation: spin 1s linear infinite;
            }

            @keyframes spin {
               0% {
                  transform: rotate(0deg);
               }

               100% {
                  transform: rotate(360deg);
               }
            }
         </style>
      </div>

      <div class="page-content" style="background-color: white;">

         <div class="page-header" style="background-color: white;">

            <nav class="navbar1">

               <ul id="menuList1" class="navitems1">

                  {% if user_access['toggleDashboard'] == 'On' %}
                  <li class="active">
                     <a href="{{ url_for('projects') }}" class="link">
                        <i class="fa-solid fa-chart-line" style="margin-right: 5px;"></i> Dashboard
                     </a>
                  </li>
                  {% endif %}

                  {% if user_access['toggleProjectStatus'] == 'On' %}
                  <li>
                     <a href="{{ url_for('prj_status') }}" class="link">
                        <i class="fa-solid fa-clipboard-check" style="margin-right: 5px;"></i> Status
                     </a>
                  </li>
                  {% endif %}

                  {% if user_access['toggleHoursEdit'] == 'On' %}
                  <li>
                     <a href="{{ url_for('hours_edit') }}" class="link">
                        <i class="fa-solid fa-clock-rotate-left" style="margin-right: 5px;"></i> Hours Edit
                     </a>
                  </li>
                  {% endif %}

                  {% if user_access['toggleMaterialReceipt'] == 'On' %}
                  <li><a href="{{ url_for('Material_Receipt') }}" class="link"><i class="fa-solid fa-industry"></i>
                        Material Receipt</a></li>
                  {% endif %}

                  {% if user_access['toggleHoursView'] == 'On' %}
                  <li>
                     <a href="{{ url_for('hrs_view') }}" class="link">
                        <i class="fa-solid fa-clock" style="margin-right: 5px;"></i> Hours View
                     </a>
                  </li>
                  {% endif %}

               </ul>

               <div class="menu-icon">
                  <i class="fa-solid fa-bars" onclick="toggleMenu()"></i>
               </div>

               <script>
                  let menuList1 = document.getElementById("menuList1");
                  menuList1.style.maxHeight = "0px";

                  function toggleMenu1() {
                     if (menuList1.style.maxHeight == "0px") {
                        menuList1.style.maxHeight = "300px";
                     } else {
                        menuList1.style.maxHeight = "0px";
                     }
                  }
               </script>

               <style>
                  .line {
                     margin-top: 10px;
                     height: 2px;
                     background-color: rgb(82, 79, 79);
                  }

                  .menu-icon {
                     display: none;
                  }

                  /* Base styles for links */
                  .link {
                     display: inline-block;
                     padding: 7px;
                     color: #0071e3;
                     text-decoration: none;
                     font-size: 16px;
                     transition: background-color 0.3s ease, color 0.3s ease;
                     cursor: pointer;
                     font-weight: bold;
                  }

                  li.active a.link {
                     /* More specific selector */
                     background-color: #3d91e4;
                     color: white;
                     font-weight: bold;
                     border-top-left-radius: 5px;
                     border-top-right-radius: 5px;
                  }

                  .navbar1 {
                     padding: 5px 15px;
                     display: flex;
                     align-items: center;
                     justify-content: space-between;
                     position: relative;
                  }

                  .navitems1 {
                     margin-top: 20px;
                     display: flex;
                     align-items: center;
                     justify-content: space-between;
                     /* Add this to space out items in horizontal layout */
                  }

                  .navbar1 ul {
                     display: flex;
                     gap: 0;
                     margin: 0;
                     padding: 0;
                     width: 100%;
                     justify-content: space-between;
                  }

                  .menu-icon1 {
                     display: none;
                  }

                  .menu-icon1 i {
                     color: #fff;
                     font-size: 20px;
                  }

                  @media (max-width: 600px) {
                     .navbar1 ul {
                        position: absolute;
                        top: 70px;
                        left: 0;
                        right: 0;
                        flex-direction: column;
                        text-align: center;
                        background: #004274;
                        gap: 0;
                        overflow: hidden;
                        width: 100%;
                     }

                     .navbar1 ul li {
                        padding: 20px;
                        padding-top: 0;
                     }

                     .menu-icon1 {
                        display: block;
                     }

                     #menuList1 {
                        transition: all 0.5s;
                     }
                  }

                  /* Specific styles for links when hovered on mobile */
                  @media (max-width: 600px) {
                     .link:hover {
                        background-color: #003d57;
                        color: white;
                     }

                     .link {
                        padding: 12px;
                        font-size: 18px;
                        text-align: center;
                     }
                  }
               </style>

            </nav>

            <div class="line"></div>

         </div>

         <div class="search_container">

            <div class="timenav">
               <link rel="stylesheet"
                  href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css" />

               <ul id="menuList1" class="timebar">
                  {% if user_access['toggleOverview'] == 'On' and (project_details.pm == user['name'] or
                  department_code in [10, 11, 16, 1000]) %}
                  <li>
                     <a href="{{ url_for('project_details_page', id=project_id) }}">

                        <i class="fa-solid fa-chart-bar"></i> Overview
                     </a>
                  </li>
                  {% endif %}

                  {% if user_access['toggleOverview'] == 'On' and (project_details.pm == user['name'] or
                  department_code in [10, 11, 16, 1000]) %}
                  <li>
                     <a href="/prj_hrs_view?project_id={{ project_id }}">
                        <i class="fa-regular fa-clock"></i> Hrs View
                     </a>
                  </li>
                  {% endif %}
                  {% if user_access['toggleGeneratePR'] == 'On' %}
                  <li>
                     <a href="/project_pr?project_id={{ project_id }}">
                        <i class="fa-solid fa-file-invoice"></i> Generate PR
                     </a>
                  </li>
                  {% endif %}

                  {% if user_access['toggleprjViewPO'] == 'On' %}
                  <li>
                     <a href="/project_po?project_id={{ project_id }}">
                        <i class="fa-solid fa-file-contract"></i> View PO's
                     </a>
                  </li>
                  {% endif %}
                  {% if user_access['toggleViewClaims'] == 'On' %}
                  <li>
                     <a href="/claiminfo?project_id={{ project_id }}">
                        <i class="fa-solid fa-receipt"></i> View Claims
                     </a>
                  </li>
                  {% endif %}
                  {% if user_access['togglePrjViewDO'] == 'On' %}
                  <li>
                     <a href="{{ url_for('project_do', project_id=project_id) }}" class="active">
                        <i class="fa-solid fa-truck-moving"></i> DO's
                     </a>
                  </li>
                  {% endif %}
                  {% if user_access['togglePaymentRequests'] == 'On' %}
                  <li>
                     <a href="{{ url_for('prj_pay_req', project_id=project_id) }}">
                        <i class="fa-solid fa-money-bill-wave"></i> Payment Request
                     </a>
                  </li>
                  {% endif %}

                  <li>
                     <a href="{{ url_for('prj_planner', project_id=project_id) }}">
                        <i class="fa-solid fa-calendar-check"></i> Planner
                     </a>
                  </li>

               </ul>


               <div class="menu-icon1">
                  <i class="fa-solid fa-bars" onclick="toggleMenu1()"></i>
               </div>
            </div>

            <div class="line1"></div>

            <style>
               .timenav .active i {
                  color: white !important;
                  /* Ensures icon turns white */
               }

               .search_container {

                  width: 100%;
                  padding: 10px;
               }

               .line1 {
                  margin: 3px auto;
                  /* Centers horizontally */
                  height: 2px;
                  background-color: rgb(82, 79, 79);
                  width: 97%;
                  display: block;
                  /* Ensures it behaves as a block element */
               }


               /* Style for headings and icons */
               .timenav a,
               .timenav i {
                  color: #8d7f5c !important;
                  font-weight: bold;
               }

               /* Active link style */
               .timenav .active {
                  background-color: #FF6347 !important;
                  color: white !important;
                  padding: 10px;
                  font-weight: bold;
                  border-top-left-radius: 5px;
                  border-top-right-radius: 5px;
               }

               .timebar {
                  display: flex;
                  justify-content: space-around;
                  align-items: center;
                  list-style: none;
                  margin: 0;
                  padding: 0;
                  width: 100%;
               }

               .timebar li {
                  flex: 1 1 20%;
                  margin: 5px;
                  text-align: center;
               }

               .link1 {
                  color: #8d7f5c;
                  font-size: 16px;
                  font-weight: bold;
                  transition: color 0.3s ease;
                  cursor: pointer;
               }
            </style>

         </div>

         <div class="title-box">

            <div class="title-item cssanimation open">
               <span>Project ID : {{project_details.id}} </span>
            </div>

            <div class="title-item cssanimation open">
               <span>Project Name : {{project_details.project_name}}</span>
            </div>

            <div class="title-item cssanimation open">
               <span>Project Manager : {{project_details.pm}}</span>
            </div>


            {% if user_access['toggleCreateDO'] == 'On' %}
            <div class="title-item cssanimation open">
               <button type="button" id="openModalButton" data-project-id="{{ project_id }}"
                  style="background-color: #0fabf3; color: whitesmoke; padding: 5px; border-radius: 5px; cursor: pointer; font-weight: bold; ">
                  + New DO
               </button>
            </div>
            {% endif %}

            <!-- Modal Structure -->
            <div id="modal" class="modal">

               <div class="modal-content">

                  <div class="button-container1">

                     <h2>New DO</h2>
                     <span class="close" onclick="closeModal()">&times;</span>

                  </div>

                  <form id="DoForm" method="POST" action="/create_do_with_items">


                     <div class="container">

                        <div class="double-container">

                           <div class="flex-row">

                              <div class="flex-item">
                                 <label for="project_id" class="form-label">Project ID <span
                                       style="color: red;">*</span></label>
                                 <input type="number" class="form-control" id="project_id" name="project_id"
                                    value="{{project_details.id}}" readonly style="background-color: whitesmoke;"
                                    required>
                              </div>

                              <div class="flex-item">
                                 <label for="DO_NO" class="form-label">DO Number <span
                                       style="color: red;">*</span></label>
                                 <input type="text" class="form-control" id="DO_NO" name="DO_NO" readonly
                                    value="Auto Generate" required>
                              </div>

                              <div class="flex-item">
                                 <label for="do_date" class="form-label">DO Date <span
                                       style="color: red;">*</span></label>
                                 <input type="text" class="form-control" id="do_date" name="do_date"
                                    value="{{ formatted_date }}" readonly style="background-color: whitesmoke;"
                                    required>
                              </div>

                              <div class="flex-item">
                                 <label for="Project_Ref" class="form-label">Project Ref <span
                                       style="color: red;">*</span></label>
                                 <input type="text" class="form-control" id="Project_Ref" name="Project_Ref"
                                    value="{{ project_id }}" required>
                              </div>

                           </div>

                           <div class="flex-row">

                              <div class="flex-item">
                                 <label for="po_number" class="form-label">PO Number <span
                                       style="color: red;">*</span></label>
                                 <input type="text" class="form-control" id="po_number" name="po_number" required>
                              </div>

                              <div class="flex-item">
                                 <label for="Attn" class="form-label">Attn <span style="color: red;">*</span></label>
                                 <input type="text" class="form-control" id="Attn" name="Attn" required>
                              </div>

                           </div>

                           <div class="flex-item">
                              <label for="Remarks" class="form-label">Remarks</label>
                              <input type="text" class="form-control" id="Remarks" name="Remarks" max="70">
                           </div>

                           <div class="flex-item">
                              <label for="Warranty" class="form-label">Warranty</label>
                              <input type="text" class="form-control" id="Warranty" name="Warranty" max="70">
                           </div>

                        </div>

                        <input type="hidden" id="billing_address" value="{{ project_details['billing_address'] }}">
                        <input type="hidden" id="delivery_address" value="{{ project_details['delivery_address'] }}">


                        <div class="double-container">

                           <label for="client_add" class="form-label">Client <span style=" color:
                              red;">*</span></label>
                           <input type="text" class="form-control" id="client_add" name="client_add" required>

                           <!-- Hidden field to store the full address from Flask -->
                           <input type="hidden" id="billing_address" value="{{ project_details['billing_address'] }}">

                           <label for="client_Address_Line1" class="form-label">Address Line 1</label>
                           <input type="text" class="form-control" id="client_Address_Line1"
                              name="client_Address_Line1">

                           <label for="client_Address_Line2" class="form-label">Address Line 2</label>
                           <input type="text" class="form-control" id="client_Address_Line2"
                              name="client_Address_Line2">

                           <label for="client_Address_Line3" class="form-label">Address Line 3</label>
                           <input type="text" class="form-control" id="client_Address_Line3"
                              name="client_Address_Line3">

                           <!-- JavaScript to split and populate fields -->
                           <script>
                              window.onload = function () {
                                 // Fetch and split billing address
                                 let billingAddress = document.getElementById("billing_address").value;
                                 let addressParts = billingAddress.split(",");

                                 // Populate billing address fields
                                 document.getElementById("client_Address_Line1").value = addressParts[0] ? addressParts[0].trim() : "";
                                 document.getElementById("client_Address_Line2").value = addressParts[1] ? addressParts[1].trim() : "";
                                 document.getElementById("client_Address_Line3").value = addressParts[2] ? addressParts[2].trim() : "";

                                 // Fetch and split delivery address
                                 let deliveryAddress = document.getElementById("delivery_address").value;
                                 let deliveryParts = deliveryAddress.split(",");

                                 // Populate delivery address fields
                                 document.getElementById("Delivery_add").value = deliveryParts[0] ? deliveryParts[0].trim() : "";
                                 document.getElementById("delivary_Address_Line1").value = deliveryParts[1] ? deliveryParts[1].trim() : "";
                                 document.getElementById("delivary_Address_Line2").value = deliveryParts[2] ? deliveryParts[2].trim() : "";
                                 document.getElementById("delivary_Address_Line3").value = deliveryParts[3] ? deliveryParts[3].trim() : "";
                              };
                           </script>


                        </div>

                        <div class="double-container">
                           <label for="Delivery_add" class="form-label">Delivery <span
                                 style=" color: red;">*</span></label>
                           <input type="text" class="form-control" id="Delivery_add" name="Delivery_add" required>

                           <label for="delivary_Address_Line1" class="form-label">Address
                              Line 1
                           </label>
                           <input type=" text" class="form-control" id="delivary_Address_Line1"
                              name="delivary_Address_Line1">

                           <label for="delivary_Address_Line2" class="form-label">Address
                              Line 2
                           </label>
                           <input type=" text" class="form-control" id="delivary_Address_Line2"
                              name="delivary_Address_Line2">

                           <label for="delivary_Address_Line3" class="form-label">Address
                              Line 3
                           </label>
                           <input type=" text" class="form-control" id="delivary_Address_Line3"
                              name="delivary_Address_Line3">

                        </div>

                     </div>

                     <div class="container" style="padding: 10px;">

                        <div class="table-responsive1">

                           <table class="overhead_table" width="100%" id="dynamicTable">

                              <thead>

                                 <tr>

                                    <th class="text-center">S/N</th>
                                    <th class="text-center">Index</th>
                                    <th class="text-center">Description</th>
                                    <th class="text-center">Quantity</th>
                                    <th class="text-center">Unit</th>
                                    <th class="text-center">Action</th>

                                 </tr>

                              </thead>

                              <tbody>

                                 {% for i in range(2) %}
                                 <tr>
                                    <td style="width: 5%; text-align: center;">{{ loop.index }}</td>
                                    <!-- Index Column -->

                                    <td><input class="form-control" type="text" name="index_number[]" class="form-item">
                                    </td>

                                    <td>
                                       <div>
                                          <button type="button" onclick="toggleDetails(this)"
                                             style="background-color: #f8f9fa; color: #007bff; border: 1px solid #ced4da; border-radius: 4px; padding: 3px 8px; font-size: 0.875rem; cursor: pointer;">
                                             + Headings
                                          </button>

                                          <div class="extra-details d-none mt-2">
                                             <input class="form-control mb-1" type="text" name="description_header[]"
                                                placeholder="Header (optional)">
                                             <input class="form-control mb-1" type="text" name="description_subheader[]"
                                                placeholder="Subheading (optional)">
                                          </div>
                                          <textarea class="form-control mb-1" name="description_body[]" rows="2"
                                             placeholder="Main Description (required)"></textarea>

                                       </div>
                                    </td>

                                    <td><input class="form-control" type="number" name="quantity[]" class="form-item">
                                    </td>
                                    <td><input class="form-control" type="text" step="any" name="unit_price[]"
                                          class="form-item"></td>
                                    <td>
                                       <button type="button" class="btn-delete"
                                          style="color: red; background: none; border: none; padding: 0;"
                                          onclick="deleteRow(this)">
                                          <ion-icon name="trash" class="fa-solid fa-trash"></ion-icon>
                                       </button>

                                    </td>
                                 </tr>
                                 {% endfor %}

                              </tbody>

                           </table>

                        </div>

                        <div class="button-container1">

                           <button type="button" class="new-enquiry-btn custom-btn btn-2" id="addRowButton"
                              style="margin-top: 10px;">
                              +</button>
                           <button type="submit" id="CreateDoButton" class=" new-enquiry-btn custom-btn btn-2"
                              style="margin-top: 10px;">Generate
                              DO</button>

                        </div>

                     </div>

                     <script>


                        function toggleDetails(button) {
                           const detailsDiv = button.nextElementSibling;
                           detailsDiv.classList.toggle('d-none');
                        }

                        function toggleDetails(button) {
                           const detailsDiv = button.nextElementSibling;
                           detailsDiv.classList.toggle('d-none');
                           button.textContent = detailsDiv.classList.contains('d-none') ? '+ Headings' : 'âˆ’ Headings';
                        }

                        document.getElementById("addRowButton").addEventListener("click", function () {
                           const tableBody = document.getElementById("dynamicTable").getElementsByTagName("tbody")[0];
                           const currentRowCount = tableBody.querySelectorAll("tr").length; // Count current rows
                           const newIndex = currentRowCount + 1;

                           const newRow = document.createElement("tr");
                           newRow.innerHTML = `
                                 <td style="width: 5%; text-align: center;">${newIndex}</td>  <!-- Index Column -->
                                 <td><input class="form-control" type="text" name="index_number[]"
                                          class="form-item" ></td>
                                 <td>
                                       <div>
                                          <button type="button" onclick="toggleDetails(this)"
                                             style="background-color: #f8f9fa; color: #007bff; border: 1px solid #ced4da; border-radius: 4px; padding: 3px 8px; font-size: 0.875rem; cursor: pointer;">
                                             + Headings
                                          </button>

                                          <div class="extra-details d-none mt-2">
                                             <input class="form-control mb-1" type="text" name="description_header[]"
                                                   placeholder="Header (optional)">
                                             <input class="form-control mb-1" type="text" name="description_subheader[]"
                                                   placeholder="Subheading (optional)">
                                          </div>
                                          <textarea class="form-control mb-1" name="description_body[]" rows="2"
                                             placeholder="Main Description (required)"></textarea>
                                       </div>
                                 </td>
                                 <td><input class="form-control" type="number" name="quantity[]" oninput="calculateTotal(this)"></td>
                                 <td><input class="form-control" type="text" step="any" name="unit_price[]" oninput="calculateTotal(this)"></td>
                                 <td>
                                       <button type="button" class="btn-delete" style="color: red; border: none;" onclick="deleteRow(this)">
                                          <ion-icon name="trash" class="fa-solid fa-trash"></ion-icon>
                                       </button>
                                 </td>
                              `;

                           tableBody.appendChild(newRow);
                        });

                        function reindexRows() {
                           const rows = document.querySelectorAll("#dynamicTable tbody tr");
                           rows.forEach((row, index) => {
                              row.cells[0].textContent = index + 1;
                           });
                        }

                        function deleteRow(button) {
                           const row = button.closest("tr");
                           row.remove();
                           reindexRows();
                        }


                     </script>

                  </form>

               </div>

            </div>

            <script>
               document.getElementById('DoForm').addEventListener('submit', function (e) {
                  const submitBtn = document.getElementById('CreateDoButton');
                  submitBtn.disabled = true;                // Disable button
                  submitBtn.innerText = 'Submitting...';    // Optional: feedback to user
               });
            </script>

            <!-- JavaScript for Modal and Fetching Data -->
            <script>

               document.addEventListener('input', function (e) {
                  if (e.target.tagName.toLowerCase() === 'textarea') {
                     e.target.style.height = 'auto';
                     e.target.style.height = e.target.scrollHeight + 'px';
                  }
               });
               function closeModal() {
                  document.getElementById('modal').style.display = 'none';
                  window.location.reload(); // Reloads the current page
               }

               document.getElementById('openModalButton').onclick = async function () {
                  const modal = document.getElementById('modal');
                  const projectId = this.getAttribute('data-project-id');

                  try {
                     // Fetch DO details from the server
                     const response = await fetch('/get_do_details', {
                        method: 'POST',
                        headers: {
                           'Content-Type': 'application/json'
                        },
                        body: JSON.stringify({ project_id: projectId })
                     });

                     const data = await response.json();


                     if (response.ok) {

                        document.getElementById('po_number').value = data.po_number || '';
                        document.getElementById('do_date').value = data.do_date || '';
                        document.getElementById('client_add').value = data.client || '';

                        modal.style.display = 'flex';
                     } else {
                        alert(data.error || 'Failed to fetch DO details');
                     }
                  } catch (error) {
                     console.error('Error fetching DO details:', error);
                     alert('An error occurred while fetching DO details');
                  }
               };

               document.querySelector('.close-button').onclick = function () {
                  document.getElementById('modal').style.display = 'none';
               };

               window.onclick = function (event) {
                  if (event.target == document.getElementById('modal')) {
                     document.getElementById('modal').style.display = 'none';
                  }
               };

               // Form validation before submitting
               document.getElementById("projectForm").addEventListener("submit", function (event) {
                  const rows = document.querySelectorAll("#dynamicTable tbody tr");
                  let isValid = true;

                  rows.forEach((row) => {
                     const index_number = row.querySelector('input[name="index_number[]"]').value;
                     const description = row.querySelector('input[name="description[]"]').value;
                     const quantity = row.querySelector('input[name="quantity[]"]').value;
                     const unitPrice = row.querySelector('input[name="unit_price[]"]').value;

                  });

               });

            </script>

            <style>
               textarea.form-control {
                  resize: vertical;
                  min-height: 40px;
                  overflow-y: auto;
               }

               input.form-control,
               textarea.form-control {
                  padding: 6px 10px;
                  font-size: 14px;
                  width: 100%;
                  box-sizing: border-box;
               }

               td {
                  vertical-align: top;
               }

               .btn-delete {
                  background: transparent;
                  border: none;
                  cursor: pointer;
               }

               .d-none {
                  display: none;
               }

               .title-box {
                  display: flex;
                  padding: 5px;
                  background-color: white;
                  border-radius: 8px;
                  box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
                  margin-bottom: 10px;
                  justify-content: space-between;

               }

               .title-item {
                  display: flex;
                  align-items: center;

                  /* Align title and value on the same row */
               }

               .title-item span {
                  font-size: 18px;
                  font-weight: bold;
                  color: #0fabf3;
               }


               @keyframes open {
                  from {
                     width: 20px;
                     /* Start with 0 width */
                  }

                  to {
                     width: 573px;
                     /* Animate to 473px width */
                  }
               }

               /* Responsive styling for smaller screens */
               @media (max-width: 768px) {
                  .title-box {
                     flex-direction: column;
                     /* Stack items vertically on smaller screens */
                     align-items: flex-start;
                  }

                  .title-item {
                     margin-bottom: 15px;
                     /* Space between stacked items */
                  }
               }
            </style>

            <style>
               .new-enquiry-btn {
                  background: linear-gradient(45deg, #007AFF, #34AADC, #5856D6, #FF2D55);
                  background-size: 200% 200%;
                  color: white;
                  font-weight: bold;
                  border: none;
                  padding: 6px 12px;
                  border-radius: 5px;
                  cursor: pointer;
                  font-size: 14px;
                  display: flex;
                  align-items: center;
                  transition: all 0.4s ease-in-out;
                  box-shadow: 10px 10px 10px rgba(0, 122, 255, 0.3);
                  /* Soft shadow */
               }

               /* Hover effect: Darker Gradient + Glow */
               .new-enquiry-btn:hover {
                  background: linear-gradient(45deg, #0056A3, #2598C1, #4741C1, #D91D48);
                  background-size: 200% 200%;
                  box-shadow: 0px 6px 12px rgba(0, 86, 179, 0.5);
                  /* Stronger shadow on hover */
                  transform: scale(1.05);
               }

               .button-container1 .button-container h3 {
                  font-size: 22px;
                  font-weight: bold;
                  color: #007AFF;
                  /* Apple Blue */
                  letter-spacing: 1px;
                  background: linear-gradient(45deg, #007AFF, #34AADC);
                  -webkit-background-clip: text;
                  -webkit-text-fill-color: transparent;
                  text-shadow: 2px 2px 6px rgba(0, 122, 255, 0.3);
                  animation: fadeIn 0.6s ease-in-out;
               }

               /* Smooth fade-in animation */
               @keyframes fadeIn {
                  from {
                     opacity: 0;
                     transform: translateY(-10px);
                  }

                  to {
                     opacity: 1;
                     transform: translateY(0);
                  }
               }
            </style>

            <style>
               /* Basic styling for the table */
               .overhead_table {
                  width: 100%;
                  border-collapse: collapse;
                  margin-bottom: 0px;

               }

               .overhead_table th,
               .overhead_table td {
                  padding: 5px;
                  text-align: center;
               }

               /* Set specific column widths */
               .overhead_table th:nth-child(1),
               .overhead_table td:nth-child(1) {
                  width: 3%;
                  /* Category column width */
               }

               .overhead_table th:nth-child(2),
               .overhead_table td:nth-child(2) {
                  width: 3%;
                  /* Category column width */
               }

               .overhead_table th:nth-child(3),
               .overhead_table td:nth-child(3) {
                  width: 45%;
                  /* Sub Category column width */
               }

               .overhead_table th:nth-child(4),
               .overhead_table td:nth-child(4) {
                  width: 8%;
                  /* Item Name column width */
               }

               .overhead_table th:nth-child(5),
               .overhead_table td:nth-child(5) {
                  width: 8%;
                  /* Invoice Number column width */
               }

               .overhead_table th:nth-child(6),
               .overhead_table td:nth-child(6) {
                  width: 3%;
                  /* Currency column width */
               }

               th {
                  background-color: #f4f4f4;
               }




               /* Responsive styling */
               @media (max-width: 768px) {

                  table,
                  thead,
                  tbody,
                  th,
                  td,
                  tr {
                     display: block;
                  }

                  th {
                     position: absolute;
                     left: -9999px;
                     top: -9999px;
                  }

                  td {
                     border: none;
                     position: relative;
                     padding-left: 50%;
                     text-align: left;
                  }

                  td:before {
                     position: absolute;
                     top: 10px;
                     left: 10px;
                     width: 45%;
                     padding-right: 10px;
                     white-space: nowrap;
                     font-weight: bold;
                  }

               }

               /* Remove styling from table elements */
               .overhead_table td {
                  margin: 0;
                  padding: 0;
               }
            </style>

            <!-- CSS for Modal -->
            <style>
               .close {
                  font-size: 24px;
                  font-weight: bold;
                  color: #aaa;
                  cursor: pointer;
               }

               .close:hover,
               .close:focus {
                  color: #000;
               }

               .modal {
                  display: none;
                  position: fixed;
                  z-index: 1000;
                  left: 0;
                  top: 0;
                  width: 100%;
                  height: 100%;
                  overflow: auto;
                  background: rgba(255, 255, 255, 0.1);
                  backdrop-filter: blur(10px);
                  justify-content: center;
               }


               .modal-content {
                  background-color: white;
                  margin: auto;
                  padding: 20px;
                  border-radius: 10px;
                  box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
                  width: 80%;
               }

               .close-button {
                  color: #aaa;
                  float: right;
                  font-size: 28px;
                  font-weight: bold;
                  cursor: pointer;
               }
            </style>

         </div>

         <div class="records table-responsive">

            <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">

            <div class="table-responsive">

               <table class="table table-main" width="100%">
                  <thead>
                     <tr>
                        <th style="text-align: center;"><span class="fa-solid fa-eye"
                              style="font-size: 1.25em; color: black;"></span>
                        </th>
                        <th style="text-align: center;">DO Date</th>
                        <th style="text-align: center;">DO No</th>
                        <th style="text-align: left;">client</th>
                        <th style="text-align: left;">Delivery</th>
                        <th style="text-align: left;">Created By</th>
                        <th style="text-align: left;">Attn</th>
                        <th style="text-align: center;">Status</th>
                        <th style="text-align: center;" colspan="2">Actions</th>
                     </tr>
                  </thead>

                  <tbody>
                     {% if created_do %}
                     {% for row in created_do %}
                     <tr>

                        <td style="text-align: center;">
                           <span class="icon" onclick="openPaymentDetails('{{ row['do_number'] }}')"
                              style="cursor: pointer;">
                              <span class="fa-solid fa-eye" style="font-size: 1.25em; color: orangered;"></span>
                           </span>
                        </td>

                        <td style="text-align: center;">{{ row['do_date'] }}</td>
                        <td style="text-align: center;">{{ row['do_number'] }}</td>
                        <td style="text-align: left;">{{ row['client'] }}</td>
                        <td style="text-align: left;">{{ row['delivery'] }}</td>
                        <td style="text-align: left;">{{ row['created_by'] }}</td>
                        <td style="text-align: left;">{{ row['Attn'] }}</td>

                        <td class="text-center status" style="font-weight: bold; text-align: center;">
                           <span style="color: 
                                 {% if row['status'] == 'Open' %}
                                    brown;
                                 {% elif row['status'] == 'Approved' %}
                                    blue;
                                 {% elif row['status'] == 'Processed' %}
                                    green;
                                 {% elif row['status'] == 'Canceled' %}
                                    red;
                                 {% endif %};
                                 background-color: 
                                 {% if row['status'] == 'Open' %}
                                    #f2e1d7;
                                 {% elif row['status'] == 'Approved' %}
                                    #a4acee;
                                 {% elif row['status'] == 'Processed' %}
                                    #d0f8e3;
                                 {% elif row['status'] == 'Canceled' %}
                                    #f8d7da;
                                 {% endif %};
                                 padding: 2px 8px; 
                                 border-radius: 8px; 
                                 display: inline-block;">
                              {{ row['status'] if row['status'] else 'N/A' }}
                           </span>
                        </td>

                        <td class="text-center" style="text-align: center;">
                           <form method="POST" action="/project_do">
                              <input type="hidden" name="DO_Print" value="{{ row['do_number'] }}">
                              <button type="submit" class="btn"
                                 style="background-color: transparent; border: none; cursor: pointer;">
                                 <ion-icon name="print" style="color: rgb(21, 33, 37); font-size: 1.6em;"></ion-icon>
                              </button>
                           </form>
                        </td>

                        <td class="text-center" id="row-{{ row['do_number'] }}" style="text-align: center;">
                           <button onclick="deleteDO('{{ row['do_number'] }}')" class="btn btn-link"
                              style="border: none;">
                              <span class="icon">
                                 <span class="fa-solid fa-trash"
                                    style="color: red; font-size: large; cursor: pointer;"></span>
                              </span>
                           </button>
                        </td>
                     </tr>
                     {% endfor %}
                     {% else %}
                     <tr>
                        <td colspan="15" class="text-center">No items available</td>
                     </tr>
                     {% endif %}
                  </tbody>


               </table>

               <script>

                  function openPaymentDetails(DO_no) {
                     fetch(`/get_do_details_toview?DO_no=${DO_no}`)
                        .then(response => response.json())
                        .then(data => {
                           if (data.success) {
                              document.getElementById('vproject_id').textContent = data.do_details.proj_no;
                              document.getElementById('vdo_number').textContent = data.do_details.do_number;
                              document.getElementById('vDOdate').textContent = data.do_details.do_date;
                              document.getElementById('vPOnumber').textContent = data.do_details.po_number;
                              document.getElementById('vattn').textContent = data.do_details.Attn;
                              document.getElementById('vcreated_by').textContent = data.do_details.created_by;
                              document.getElementById('vRemarks').textContent = data.do_details.Remarks;
                              document.getElementById('vWarranty').textContent = data.do_details.Warranty;
                              document.getElementById('vClient').textContent = data.do_details.client;
                              document.getElementById('vClient1').textContent = data.do_details.client_add_l1;
                              document.getElementById('vClient2').textContent = data.do_details.client_add_l2;
                              document.getElementById('vClient3').textContent = data.do_details.client_add_l3;
                              document.getElementById('vDelivery').textContent = data.do_details.delivery;
                              document.getElementById('vDelivery1').textContent = data.do_details.delivery_add_l1;
                              document.getElementById('vDelivery2').textContent = data.do_details.delivery_add_l2;
                              document.getElementById('vDelivery3').textContent = data.do_details.delivery_add_l3;



                              let itemsTable = document.getElementById('modalItemsTable');
                              itemsTable.innerHTML = "";

                              data.do_items.forEach((do_item, index) => {
                                 let quantity = parseFloat(do_item.qty) || 0;
                                 let itemName = do_item.item_name || '';
                                 let Unit = do_item.Unit || '';
                                 let index_number = do_item.index_number || '';



                                 let formattedItemName = itemName
                                    .replace(/Header -/g, '<b>Header -</b>')
                                    .replace(/Subheader -/g, '<b>Subheader -</b>')
                                    .replace(/Body -/g, '<b>Body -</b>');

                                 let row = `<tr>
                                            <td style="width: 5%; text-align: center;">${index_number}</td>  <!-- Index Column -->
                                             <td style="width: 70%; text-align: left;"><pre style="margin: 0;">${formattedItemName}</pre></td>
                                            <td style="width: 5%; text-align: right;">${quantity}</td>
                                            <td style="width: 10%; text-align: right;"> ${Unit}</td>
                                        </tr>`;
                                 itemsTable.innerHTML += row;
                              });

                              document.getElementById('paymentModal').style.display = 'block';
                           } else {
                              alert('Payment details not found!');
                           }
                        })
                        .catch(error => console.error('Error fetching payment details:', error));
                  }

                  function closevModal() {
                     document.getElementById('paymentModal').style.display = 'none';
                  }

               </script>

               <div id="paymentModal" class="modal">

                  <div class="modal-content">

                     <div class="button-container1">

                        <h2>Delivery Order Details (<span id="vdo_number"></span>)
                        </h2>
                        <span class="close" onclick="closevModal()">&times;</span>

                     </div>

                     <style>
                        .button-container1 h2 {
                           font-size: 22px;
                           font-weight: bold;
                           color: #007AFF;
                           /* Apple Blue */
                           letter-spacing: 1px;
                           background: linear-gradient(45deg, #007AFF, #34AADC);
                           -webkit-background-clip: text;
                           -webkit-text-fill-color: transparent;
                           text-shadow: 2px 2px 6px rgba(0, 122, 255, 0.3);
                           animation: fadeIn 0.6s ease-in-out;
                        }

                        /* Smooth fade-in animation */
                        @keyframes fadeIn {
                           from {
                              opacity: 0;
                              transform: translateY(-10px);
                           }

                           to {
                              opacity: 1;
                              transform: translateY(0);
                           }
                        }
                     </style>

                     <div class="container" style="background-color: #f5f5f7;">

                        <div class="invoice-header">
                           <div class="invoice-row">
                              <p><strong>Project ID</strong></p>
                              <span id="vproject_id"></span>
                           </div>

                           <div class="invoice-row">
                              <p><strong>DO Date</strong></p>
                              <span id="vDOdate"></span>
                           </div>
                           <div class="invoice-row">
                              <p><strong>PO Number</strong></p>
                              <span id="vPOnumber"></span>
                           </div>
                           <div class="invoice-row">
                              <p><strong>Attn</strong></p>
                              <span id="vattn"></span>
                           </div>

                        </div>

                        <div class="invoice-header">

                           <div class="invoice-row">
                              <p><strong>Created By</strong></p>
                              <span id="vcreated_by"></span>
                           </div>

                           <div class="invoice-row">
                              <p><strong>Remarks</strong></p>
                              <span id="vRemarks"></span>
                           </div>

                           <div class="invoice-row">
                              <p><strong>Warranty</strong></p>
                              <span id="vWarranty"></span>
                           </div>

                        </div>

                        <div class="invoice-header">

                           <div class="invoice-row">
                              <p><strong>Client</strong></p>
                              <span id="vClient"></span>
                           </div>

                           <div class="invoice-row">
                              <p><strong>Address</strong></p>
                              <span id="vClient1"></span>
                           </div>
                           <div class="invoice-row">
                              <p><strong></strong></p>
                              <span id="vClient2"></span>
                           </div>
                           <div class="invoice-row">
                              <p><strong></strong></p>
                              <span id="vClient3"></span>
                           </div>


                        </div>

                        <div class="invoice-header">
                           <div class="invoice-row">
                              <p><strong>Delivery</strong></p>
                              <span id="vDelivery"></span>
                           </div>
                           <div class="invoice-row">
                              <p><strong>Address</strong></p>
                              <span id="vDelivery1"></span>
                           </div>
                           <div class="invoice-row">
                              <p><strong></strong></p>
                              <span id="vDelivery2"></span>
                           </div>
                           <div class="invoice-row">
                              <p><strong></strong></p>
                              <span id="vDelivery3"></span>
                           </div>


                        </div>

                     </div>

                     <div class="container">

                        <div class="table-responsive1">

                           <table class="table table-main" width="100%">

                              <thead>
                                 <tr>
                                    <th style="text-align: center; width: 2%;">S/N</th>
                                    <th style="text-align: left; width: 75%;">Item</th>
                                    <th style="text-align: right; width: 3%;">Qty</th>
                                    <th style="text-align: right; width: 7%;">Unit </th>
                                 </tr>
                              </thead>
                              <tbody id="modalItemsTable">
                                 <!-- Items will be inserted here -->
                              </tbody>

                           </table>

                        </div>

                     </div>

                  </div>

               </div>

            </div>

         </div>


      </div>

   </div>

   <style>
      .button-container1 {
         display: flex;
         justify-content: space-between;
         align-items: center;
         width: 100%;
         margin-top: 10px;
         gap: 10px;
      }
   </style>

   <script>
      function deleteDO(doNumber) {
         if (confirm("Are you sure you want to delete this DO permanently?")) {
            fetch('/delete_prj_do', {
               method: 'POST',
               headers: {
                  'Content-Type': 'application/json',
               },
               body: JSON.stringify({ do_number: doNumber })
            })
               .then(response => response.json())
               .then(data => {
                  if (data.success) {
                     alert(data.message);
                     location.reload();

                  } else {
                     alert("Error: " + data.message);
                  }
               })
               .catch(error => {
                  console.error("Error:", error);
                  alert("An unexpected error occurred.");
               });
         }
      }
   </script>

   <style>
      .records {
         width: 100%;
         overflow-x: auto;
      }

      .record-header {
         width: 100%;
         padding: 10px;
         background-color: #d8eaf3;
      }
   </style>

   <style>
      .records {
         width: 100%;
         overflow-x: auto;
      }

      .record-header {
         width: 100%;
         padding: 10px;
      }

      .container {
         display: flex;
         flex-direction: row;
         flex-wrap: wrap;
         align-content: space-around;
         border-radius: 5px;
         width: 100%;
         gap: 10px;
         background-color: white;
         box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
      }

      .double-container {
         display: flex;
         flex-direction: column;
         flex: 1;
         padding: 10px;
         border-radius: 5px;
         box-shadow: 0 2px 4px rgba(6, 6, 6, 0.1);
         box-sizing: border-box;
         background: linear-gradient(135deg, #e0f7fa, #b2ebf2);
         /* Ensure padding and border are included in width */
      }


      .form-label {
         display: block;
         /* margin-bottom: 5px; */
      }

      .form-control {
         width: 100%;
         padding: 5px 6px;
         margin-bottom: 10px;
         box-sizing: border-box;
         border: 1px solid #ced4da;
         border-radius: 6px;
         font-size: 1rem;
         line-height: 1.0;
         color: #495057;
         background-color: #fff;
         box-shadow: inset 0 1px 2px rgba(0, 0, 0, 0.075);
         transition: border-color 0.2s ease-in-out, box-shadow 0.2s ease-in-out;
      }

      .form-control:focus {
         color: #495057;
         background-color: #fff;
         border-color: chartreuse;
         outline: 0;
         box-shadow: 0 0 0 0.05rem rgba(0, 123, 255, 0.25);
      }

      .form-control::placeholder {
         color: #6c757d;
         opacity: 1;
      }

      .form-control:disabled,
      .form-control[readonly] {
         background-color: #e9ecef;
         opacity: 1;
      }

      .form-control:hover {
         border-color: #b0b4b8;
      }

      .form-control::placeholder {
         text-align: center;
      }


      .flex-item-full-width {
         flex: 1;
      }

      .flex-row {
         display: flex;
         flex-direction: row;
         gap: 15px;
         /* Optional: add spacing between flex items within .flex-row */
      }

      .flex-item {
         /* margin-top: 5px; */
         flex: 1;
         /* Ensure flex items grow equally */
      }


      /* Responsive adjustments */
      @media (max-width: 768px) {
         .btn4 {
            font-size: 14px;
            padding: 8px 12px;
            /* Adjusted padding for smaller screens */
         }

         .row1 {
            flex-direction: column;
            align-items: center;
         }
      }

      @media (max-width: 480px) {
         .btn4 {
            font-size: 12px;
            padding: 6px 10px;
            /* Further adjusted padding */
         }
      }

      @media (max-width: 768px) {
         .flex-item {
            flex: 1 1 100%;
         }
      }

      @media (max-width: 768px) {
         .double-container {
            width: 100%;
         }
      }
   </style>

   <!-- CSS for Modal -->
   <style>
      .modal {
         display: none;
         position: fixed;
         z-index: 1000;
         left: 0;
         top: 0;
         width: 100%;
         height: 100%;
         background: linear-gradient(rgba(0, 0, 0, 0.4), rgba(0, 0, 0, 0.6));
         backdrop-filter: blur(4px);
         animation: fadeIn 0.3s ease-in-out;
      }

      /* Optional animation for smoother appearance */
      @keyframes fadeIn {
         from {
            opacity: 0;
         }

         to {
            opacity: 1;
         }
      }

      .modal-content {
         background-color: white;
         margin: auto;
         padding: 20px;
         border-radius: 10px;
         box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
         width: 90%;
      }

      .close-button {
         color: #aaa;
         float: right;
         font-size: 28px;
         font-weight: bold;
         cursor: pointer;
      }

      .close {
         color: #aaa;
         float: right;
         font-size: 28px;
         font-weight: bold;
         cursor: pointer;
      }
   </style>

   <style>
      .table-responsive1 {
         width: 100%;
         overflow: auto;
         max-height: 400px;
         border-radius: 10px;
         border: 1px solid #ddd;
      }

      .table-responsive {
         width: 100%;
         overflow: auto;
         max-height: 750px;
      }

      .table-main {
         width: 100%;
         border-collapse: collapse;
      }

      .table-main thead {
         position: sticky;
         top: 0;
         background: white;
         z-index: 10;
      }

      .container {
         background-color: white;
         /* Light Gray - Similar to Apple's typical background */
         padding: 10px;
         border-radius: 10px;
         display: flex;
         flex: 1;
         gap: 20px;
         border: 2px solid #d3d3d3;
         /* Slightly darker light gray for border */
         margin-bottom: 15px;
      }

      .invoice-header {
         flex: 1;
         background: linear-gradient(135deg, #e0f7fa, #b2ebf2);
         padding: 20px;
         border-radius: 12px;
         box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
         font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
         color: #004d40;
         transition: transform 0.2s ease-in-out;
      }

      .invoice-header:hover {
         transform: scale(1.02);
      }


      .invoice-row {
         display: grid;
         grid-template-columns: 140px auto;
         /* First column for labels, second for values */
         gap: 10px;
         align-items: center;
         padding: 5px 0;
      }

      .invoice-row p {
         margin: 0;
         font-weight: bold;
         text-align: left;
      }

      .invoice-row span {
         text-align: left;
      }


      .invice_header {
         width: 100%;
         padding: 10px;

      }


      .button-container1 {
         display: flex;
         justify-content: space-between;
         align-items: center;
         margin-bottom: 15px;
      }

      .button-container1 h2 {
         margin: 0;
         font-size: 1.5em;
         color: #333;
      }



      .title-box {
         display: flex;
         padding: 5px;
         background-color: white;
         border-radius: 8px;
         box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
         margin-bottom: 10px;
         justify-content: space-between;

      }

      .title-item {
         display: flex;
         align-items: center;

         /* Align title and value on the same row */
      }

      .title-item span {
         font-size: 18px;
         font-weight: bold;
         color: #004b5d;
      }


      @keyframes open {
         from {
            width: 20px;
            /* Start with 0 width */
         }

         to {
            width: 573px;
            /* Animate to 473px width */
         }
      }

      /* Responsive styling for smaller screens */
      @media (max-width: 768px) {
         .title-box {
            flex-direction: column;
            /* Stack items vertically on smaller screens */
            align-items: flex-start;
         }

         .title-item {
            margin-bottom: 15px;
            /* Space between stacked items */
         }
      }
   </style>

   <style>
      .modal-content {
         background-color: #fefefe;
         margin: 15% auto;
         /* 15% from the top and centered */
         padding: 20px;
         border: 1px solid #888;
         width: 80%;
         /* Could be more or less, depending on screen size */
         border-radius: 8px;
         box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
         position: relative;
         animation: slideDown 0.5s ease-in-out forwards;
      }

      .flex-item-full-width {
         flex: 1;
      }

      .flex-row {
         display: flex;
         flex-direction: row;
         gap: 15px;
         /* Optional: add spacing between flex items within .flex-row */
      }

      .flex-item {
         flex: 1;
         /* Ensure flex items grow equally */
      }

      .form-label {
         font-size: 16px;
         color: #333;
         margin-right: 10px;
         flex: 1;
      }

      .form-control {
         width: 100%;
         padding: 5px 6px;
         margin-bottom: 10px;
         box-sizing: border-box;
         border: 1px solid #ced4da;
         border-radius: 6px;
         font-size: 1rem;
         line-height: 1.0;
         color: #495057;
         background-color: #fff;
         box-shadow: inset 0 1px 2px rgba(0, 0, 0, 0.075);
         transition: border-color 0.2s ease-in-out, box-shadow 0.2s ease-in-out;
      }

      .form-control:focus {
         color: #495057;
         background-color: #fff;
         border-color: chartreuse;
         outline: 0;
         box-shadow: 0 0 0 0.05rem rgba(0, 123, 255, 0.25);
      }

      .form-control::placeholder {
         color: #6c757d;
         opacity: 1;
      }

      .form-control:disabled,
      .form-control[readonly] {
         background-color: #e9ecef;
         opacity: 1;
      }

      .form-control:hover {
         border-color: #b0b4b8;
      }

      .form-control::placeholder {
         text-align: center;
      }



      .modal {
         display: none;
         position: fixed;
         z-index: 1000;
         left: 0;
         top: 0;
         width: 100%;
         height: 100%;
         background-color: rgba(0, 0, 0, 0.5);
      }

      .modal-content {
         background-color: white;
         margin: 1% auto;
         padding: 20px;
         border-radius: 10px;
         width: 85%;
         border: 2px solid black;

      }



      .close {
         color: #aaa;
         font-size: 28px;
         font-weight: bold;
         cursor: pointer;
      }

      .close:hover,
      .close:focus {
         color: black;
         text-decoration: none;
         cursor: pointer;
      }
   </style>


</body>

</html>