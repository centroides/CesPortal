<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1">
    <title>Centroid Engineering Solutions</title>
    <link rel="icon" type="image/jpeg" href="static/ces_logo.png">
    <link rel="stylesheet" href="../static/res_style.css">
    <link rel="stylesheet"
        href="https://maxst.icons8.com/vue-static/landings/line-awesome/line-awesome/1.3.0/css/line-awesome.min.css">
    <!-- <script src="https://kit.fontawesome.com/f8e1a90484.js" crossorigin="anonymous"></script> -->
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css" rel="stylesheet">
    <link href="https://cdn.jsdelivr.net/npm/font-awesome@6.5.0/css/all.min.css" rel="stylesheet">
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons+Outlined" rel="stylesheet" />

</head>

<body>

    <input type="checkbox" id="menu-toggle">

    <div class="sidebar">

        <div class="side-header">
            <h3>C<span>entroid</span></h3>
        </div>

        <div class="side-content">

            <div class="profile">
                <div class="profile-img bg-img" style="background-image: url(../static/1.png)"></div>
                <h4>{{user['name']}}</h4>
                <small>{{department_code}}</small>
            </div>

            <div class="side-menu">
                <ul>

                    {% if department_code == 1000 %}
                    <li>
                        <a href="/admin">
                            <span class="fa-solid fa-user-tie"></span>
                            <small>Admin</small>
                        </a>
                    </li>
                    {% endif %}

                    {% if user_access['Accounts'] == 'On' %}
                    <li>
                        <a href="/accounts">
                            <span class="fa-solid fa-file-invoice-dollar"></span>
                            <small>Accounts</small>
                        </a>
                    </li>
                    {% endif %}
                    {% if user_access['toggleEnquiry'] == 'On' %}
                    <li>
                        <a href="/admin_enquiry">
                            <span class="fa-solid fa-handshake"></span>
                            <small>Leads</small>
                        </a>
                    </li>
                    {% endif %}
                    {% if user_access['toggleHR'] == 'On' %}
                    <li>
                        <a href="/hr">
                            <span class="fa-solid fa-user-plus"></span>
                            <small>HR</small>
                        </a>
                    </li>
                    {% endif %}
                    {% if user_access['togglePlanner'] == 'On' %}
                    <li>
                        <a href="/planner">
                            <span class="fa-solid fa-calendar-check"></span>
                            <small>Planner</small>
                        </a>
                    </li>
                    {% endif %}
                    {% if user_access['toggleProfile'] == 'On' %}
                    <li>
                        <a href="/profile" class="active">
                            <span class="fa-solid fa-user"></span>
                            <small>Profile</small>
                        </a>
                    </li>
                    {% endif %}
                    {% if user_access['toggleProjects'] == 'On' %}
                    <li>
                        <a href="/projects">
                            <span class="fa-solid fa-chart-simple"></span>
                            <small>Project</small>
                        </a>
                    </li>
                    {% endif %}
                    {% if user_access['togglePurchase'] == 'On' %}
                    <li>
                        <a href="/purchase">
                            <span class="fa-solid fa-cart-shopping"></span>
                            <small>Purchase</small>
                        </a>
                    </li>
                    {% endif %}

                    {% if user_access['toggleResources'] == 'On' %}
                    <li>
                        <a href="/resources">
                            <span class="fa-solid fa-recycle"></span>
                            <small>Resources</small>
                        </a>
                    </li>
                    {% endif %}

                    {% if department_code == 1000 %}
                    <li>
                        <a href="/settings">
                            <span class="fa-solid fa-gears"></span>
                            <small>Settings</small>
                        </a>
                    </li>
                    {% endif %}

                    <li>
                        <a href="{{ url_for('logout') }}">
                            <span class="fa-solid fa-right-from-bracket"></span>
                            <small>Log Out</small>
                        </a>
                    </li>
                </ul>
            </div>

        </div>

    </div>

    <div class="main-content">

        <div class="page-content" style="background-color: white;">

            <div class="page-header" style="background-color: white;">

                <nav class="navbar1">

                    <ul id="menuList1" class="navitems1">

                        {% if user_access['toggleAccountHub'] == 'On' %}
                        <li>
                            <a href="{{ url_for('prof_act') }}" class="link">
                                <i class="fa-solid fa-user" style="margin-right: 5px;"></i> Account Info
                            </a>
                        </li>
                        {% endif %}

                        {% if user_access['toggle_prof_TimeSheet'] == 'On' %}
                        <li>
                            <a href="{{ url_for('prof_time') }}" class="link">
                                <i class="fas fa-clock" style="margin-right: 5px;"></i> Time Sheet
                            </a>
                        </li>
                        {% endif %}

                        {% if user_access['toggleProfPurchaseRequest'] == 'On' %}
                        <li>
                            <a href="{{ url_for('prof_pr') }}" class="link">
                                <i class="fa-solid fa-cart-shopping" style="margin-right: 5px;"></i> Purchase Request
                            </a>
                        </li>
                        {% endif %}
                        {% if user_access['toggleProfPurchaseOrder'] == 'On' %}
                        <li>
                            <a href="{{ url_for('prof_po') }}" class="link">
                                <i class="fa-solid fa-file-invoice" style="margin-right: 5px;"></i> Purchase Order
                            </a>
                        </li>
                        {% endif %}
                        {% if user_access['toggleProjectRequest'] == 'On' %}
                        <li>
                            <a href="{{ url_for('prof_prj') }}" class="link">
                                <i class="fa-solid fa-project-diagram" style="margin-right: 5px;"></i> Project Request
                            </a>
                        </li>
                        {% endif %}
                        {% if user_access['togglePaymentRequest'] == 'On' %}
                        <li>
                            <a href="{{ url_for('prof_pay') }}" class="link">
                                <i class="fa-solid fa-hand-holding-dollar" style="margin-right: 5px;"></i> Payment
                                Request
                            </a>
                        </li>
                        {% endif %}
                        {% if user_access['toggle_prof_claims'] == 'On' %}
                        <li>
                            <a href="{{ url_for('prof_claim') }}" class="link">
                                <i class="fa-solid fa-file-alt" style="margin-right: 5px;"></i> Claims
                            </a>
                        </li>
                        {% endif %}
                        {% if user_access['toggleDeliveryOrders'] == 'On' %}
                        <li>
                            <a href="{{ url_for('prof_do') }}" class="link">
                                <i class="fa-solid fa-box" style="margin-right: 5px;"></i> Delivery Order
                            </a>
                        </li>
                        {% endif %}

                        {% if user_access['toggleprofSuppliers'] == 'On' %}
                        <li class="active">
                            <a href="{{ url_for('prof_supplier') }}" class="link">
                                <i class="fa-solid fa-truck" style="margin-right: 5px;"></i> Suppliers
                            </a>
                        </li>
                        {% endif %}


                    </ul>

                    <div class="menu-icon">
                        <i class="fa-solid fa-bars" onclick="toggleMenu()"></i>
                    </div>

                    <script>
                        let menuList1 = document.getElementById("menuList1");
                        menuList1.style.maxHeight = "0px";

                        function toggleMenu1() {
                            if (menuList1.style.maxHeight == "0px") {
                                menuList1.style.maxHeight = "300px";
                            } else {
                                menuList1.style.maxHeight = "0px";
                            }
                        }
                    </script>
                </nav>

                <div class="line"></div>

            </div>

            <div class="title-box">

                <div class="title-item cssanimation open">
                    <span>No.Of Suppliers : {{total_vendors}} </span>
                </div>

                <div style="width: 80%;">
                    <input type="text" id="searchInput" placeholder="Search by Vendor Id, Display Name, Contact....."
                        onkeyup="filterTable()">
                </div>

                <script>
                    function filterTable() {
                        var input, filter, table, tr, td, i, txtValue;
                        input = document.getElementById("searchInput");
                        filter = input.value.toUpperCase();
                        table = document.getElementById("projectTable");
                        tr = table.getElementsByTagName("tr");

                        for (i = 1; i < tr.length; i++) {
                            let shouldShow = false;
                            let searchableColumns = [2, 3, 7];

                            for (let j = 0; j < searchableColumns.length; j++) {
                                td = tr[i].getElementsByTagName("td")[searchableColumns[j]];
                                if (td) {
                                    txtValue = td.textContent || td.innerText;
                                    if (txtValue.toUpperCase().indexOf(filter) > -1) {
                                        shouldShow = true;
                                        break;
                                    }
                                }
                            }

                            tr[i].style.display = shouldShow ? "" : "none";
                        }
                    }
                </script>

                <style>
                    #projectTable {
                        width: 100%;
                        border-collapse: separate;
                        border-spacing: 0;
                        border-radius: 10px;
                    }


                    #searchInput {
                        width: 30%;
                        padding: 2px;
                        margin: auto;
                        display: block;
                        border: 2px solid #ccc;
                        border-radius: 5px;
                        /* Rounded corners */
                        outline: none;
                        transition: all 0.3s ease-in-out;
                        text-align: center;
                        font-size: 16px;
                    }

                    #searchInput:hover {
                        background-color: #f0f0f0;
                    }

                    #searchInput:focus {
                        border-color: #004b5d;
                        box-shadow: 0 0 8px rgba(0, 123, 255, 0.5);
                    }
                </style>

                {% if user_access['toggleprofAddpurSupplier'] == 'On' %}
                <div class="title-item cssanimation open">
                    <button type="button" id="openModalButton" data-project-id="#" class="new-enquiry-btn">
                        + New Supplier
                    </button>
                </div>
                {% endif %}

                <style>
                    .button-container1 h3 {
                        font-size: 22px;
                        font-weight: bold;
                        color: #007AFF;
                        /* Apple Blue */
                        letter-spacing: 1px;
                        background: linear-gradient(45deg, #007AFF, #34AADC);
                        -webkit-background-clip: text;
                        -webkit-text-fill-color: transparent;
                        text-shadow: 2px 2px 6px rgba(0, 122, 255, 0.3);
                        animation: fadeIn 0.6s ease-in-out;
                    }

                    #openModalButton:hover {
                        background-color: #04a389;
                        color: #ffffff;
                        border-color: #ffffff;
                        transform: scale(1.05);
                    }
                </style>

                <div id="modal" class="modal">

                    <div class="modal-content">

                        <div class="button-container1">

                            <h3>New / Update Supplier</h3>

                            <span class="close-button">&times;</span>

                        </div>

                        <form id="invoiceForm" method="POST" action="/pur_suppliers" onsubmit="validateForm(event)">

                            <div class="container">

                                <div class="invice_header">

                                    <div class="flex-item" style="display: none;">
                                        <label for="vendor_code" class="form-label">Vendor ID<span
                                                style="color: red;">*</span></label>
                                        <input type="text" class="form-control" id="vendor_code" name="vendor_code"
                                            style="background-color: rgb(235, 223, 209);" value="{{ new_vendor_code }}"
                                            readonly required>
                                    </div>

                                    <div class="flex-row">

                                        <div class="flex-item">
                                            <label for="reg_no" class="form-label">Reg No</label>
                                            <input type="text" class="form-control" id="reg_no" name="reg_no">
                                        </div>

                                        <div class="flex-item">
                                            <label for="office_no" class="form-label">Office No </label>
                                            <input type="text" class="form-control" id="office_no" name="office_no">
                                        </div>

                                    </div>

                                    <div class="flex-item">
                                        <label for="company_name" class="form-label">Company Name<span
                                                style="color: red;">*</span></label>
                                        <input type="text" class="form-control" id="company_name" name="company_name"
                                            required>
                                    </div>

                                    <div class="flex-item">
                                        <label for="display_name" class="form-label">Display Name<span
                                                style="color: red;">*</span></label>
                                        <input type="text" class="form-control" id="display_name" name="display_name"
                                            required>
                                    </div>

                                    <div class="flex-item">
                                        <label for="website" class="form-label">Website </label>
                                        <input type="text" class="form-control" id="website" name="website">
                                    </div>

                                    <div class="flex-item">
                                        <label for="Product_Category" class="form-label">Product Category</label>
                                        <input type="text" class="form-control" id="Product_Category"
                                            name="Product_Category" placeholder="Product1, Product2, Product3">
                                    </div>

                                    <div class="flex-row">

                                        <div class="flex-item">
                                            <label for="Brands" class="form-label">Brands</label>
                                            <input type="text" class="form-control" id="Brands" name="Brands"
                                                placeholder="Brand1,Brand2..">
                                        </div>

                                        <div class="flex-item">
                                            <label for="Details" class="form-label">Details</label>
                                            <input type="text" class="form-control" id="Details" name="Details">
                                        </div>

                                    </div>

                                </div>

                                <div class="invice_header">

                                    <div class="flex-item">
                                        <label for="billing_address1" class="form-label">Billing Address</label>
                                        <input type="text" class="form-control" id="billing_address1"
                                            name="billing_address1">
                                    </div>

                                    <div class="flex-item">
                                        <label for="billing_address2" class="form-label">Line 2</label>
                                        <input type="text" class="form-control" id="billing_address2"
                                            name="billing_address2">
                                    </div>

                                    <div class="flex-item">
                                        <label for="city" class="form-label">City</label>
                                        <input type="text" class="form-control" id="city" name="city">
                                    </div>

                                    <div class="flex-item">
                                        <label for="state" class="form-label">State </label>
                                        <input type="text" class="form-control" id="state" name="state">
                                    </div>

                                    <div class="flex-item">
                                        <label for="country" class="form-label">Country</label>
                                        <input type="text" class="form-control" id="country" name="country">
                                    </div>

                                    <div class="flex-item">
                                        <label for="postcode" class="form-label">Postcode </label>
                                        <input type="text" class="form-control" id="postcode" name="postcode">
                                    </div>

                                </div>

                                <div class="invice_header">

                                    <div class="flex-row">

                                        <div class="flex-item">
                                            <label for="bank_name" class="form-label">Bank Name </label>
                                            <input type="text" class="form-control" id="bank_name" name="bank_name">
                                        </div>

                                        <div class="flex-item">
                                            <label for="tax_id" class="form-label">Tax ID </label>
                                            <input type="text" class="form-control" id="tax_id" name="tax_id">
                                        </div>

                                    </div>

                                    <div class="flex-item">
                                        <label for="branch_details" class="form-label">Branch Details</label>
                                        <input type="text" class="form-control" id="branch_details"
                                            name="branch_details">
                                    </div>

                                    <div class="flex-row">

                                        <div class="flex-item">
                                            <label for="currency" class="form-label">Currency </label>
                                            <input type="text" class="form-control" id="currency" name="currency"
                                                value="SGD">
                                        </div>

                                        <div class="flex-item">
                                            <label for="pay_terms" class="form-label">Pay Terms </label>
                                            <input type="text" class="form-control" id="pay_terms" name="pay_terms">
                                        </div>

                                    </div>

                                    <div class="flex-item">
                                        <label for="account_no" class="form-label">Account No </label>
                                        <input type="text" class="form-control" id="account_no" name="account_no">
                                    </div>

                                    <div class="flex-item">
                                        <label for="swift" class="form-label">Swift </label>
                                        <input type="text" class="form-control" id="swift" name="swift">
                                    </div>

                                    <div class="flex-item">
                                        <label for="ifsc" class="form-label">IFSC</label>
                                        <input type="text" class="form-control" id="ifsc" name="ifsc">
                                    </div>

                                </div>

                                <div class="invice_header">

                                    <div class="flex-item">
                                        <input type="text" class="form-control" placeholder="Contact1" id="contact1"
                                            name="contact1">
                                    </div>

                                    <div class="flex-item">
                                        <input type="text" class="form-control" placeholder="Mobile" id="mobile1"
                                            name="mobile1">
                                    </div>

                                    <div class="flex-item">
                                        <input type="text" placeholder="Email" class="form-control" id="email1"
                                            name="email1">
                                    </div>

                                    <div class="flex-item">
                                        <input type="text" placeholder="Contact2" class="form-control" id="contact2"
                                            name="contact2">
                                    </div>

                                    <div class="flex-item">
                                        <input type="text" placeholder="Mobile" class="form-control" id="mobile2"
                                            name="mobile2">
                                    </div>

                                    <div class="flex-item">
                                        <input type="text" placeholder="Email" class="form-control" id="email2"
                                            name="email2">
                                    </div>

                                    <div class="flex-item">
                                        <input type="text" placeholder="Contact3" class="form-control" id="contact3"
                                            name="contact3">
                                    </div>

                                    <div class="flex-item">
                                        <input type="text" placeholder="Mobile" class="form-control" id="mobile3"
                                            name="mobile3">
                                    </div>

                                    <div class="flex-item">
                                        <input type="text" placeholder="Email" class="form-control" id="email3"
                                            name="email3">
                                    </div>

                                </div>

                            </div>

                            <div class="button-container2">
                                <button type="submit" class="new-enquiry-btn">Add /
                                    Save
                                </button>


                                <style>
                                    .new-enquiry-btn {
                                        background: linear-gradient(45deg, #007AFF, #34AADC, #5856D6, #FF2D55);
                                        background-size: 200% 200%;
                                        color: white;
                                        font-weight: bold;
                                        border: none;
                                        padding: 8px 12px;
                                        border-radius: 5px;
                                        cursor: pointer;
                                        font-size: 14px;
                                        display: flex;
                                        align-items: center;
                                        transition: all 0.4s ease-in-out;
                                        box-shadow: 10px 10px 10px rgba(0, 122, 255, 0.3);
                                        /* Soft shadow */
                                    }

                                    /* Hover effect: Darker Gradient + Glow */
                                    .new-enquiry-btn:hover {
                                        background: linear-gradient(45deg, #0056A3, #2598C1, #4741C1, #D91D48);
                                        background-size: 200% 200%;
                                        box-shadow: 0px 6px 12px rgba(0, 86, 179, 0.5);
                                        /* Stronger shadow on hover */
                                        transform: scale(1.05);
                                    }
                                </style>

                            </div>


                            <script>

                                function validateForm(event) {
                                    let tableRows = document.querySelectorAll("#itemsTableBody tr");
                                    let isValid = true;

                                    tableRows.forEach((row, index) => {
                                        let description = row.querySelector(".description");
                                        let qty = row.querySelector(".qty");
                                        let unitPrice = row.querySelector(".unit_price");
                                        let total = row.querySelector(".total");

                                        // Remove existing highlights
                                        description.style.border = "";
                                        qty.style.border = "";
                                        unitPrice.style.border = "";
                                        total.style.border = "";

                                        if (!description.value.trim()) {
                                            description.style.border = "2px solid red";
                                            isValid = false;
                                        }

                                        if (!qty.value.trim() || parseFloat(qty.value) <= 0) {
                                            qty.style.border = "2px solid red";
                                            isValid = false;
                                        }

                                        if (!unitPrice.value.trim() || parseFloat(unitPrice.value) <= 0) {
                                            unitPrice.style.border = "2px solid red";
                                            isValid = false;
                                        }

                                        if (!total.value.trim()) {
                                            total.style.border = "2px solid red";
                                            isValid = false;
                                        }
                                    });

                                    if (!isValid) {
                                        alert("Please fill in all required fields correctly.");
                                        event.preventDefault(); // Stop form submission
                                    }
                                }

                            </script>

                        </form>

                    </div>

                </div>

                <script>

                    document.getElementById('openModalButton').onclick = function () {
                        const modal = document.getElementById('modal');
                        modal.style.display = 'flex'; // Show the modal
                    };

                    function toggleSelectAll(checkbox) {
                        const checkboxes = document.querySelectorAll('#itemsTableBody input[type="checkbox"]');
                        checkboxes.forEach(cb => cb.checked = checkbox.checked);
                    }

                    document.querySelector('.close-button').onclick = function () {
                        document.getElementById('modal').style.display = 'none';
                        window.location.reload();
                    };



                </script>

                <style>
                    .container {
                        background-color: rgb(240, 233, 233);
                        padding: 10px;
                        border-radius: 10px;
                        display: flex;
                        flex: 1;
                        gap: 10px;
                    }

                    .invice_header {
                        width: 100%;
                        padding: 10px;

                    }

                    .button-container1 {
                        display: flex;
                        flex: 1;
                        justify-content: space-between;
                        align-items: center;
                        width: 100%;
                        margin-top: 10px;
                        gap: 10px;
                    }

                    .button-container2 {
                        display: flex;
                        flex: 1;
                        justify-content: center;
                        align-items: center;
                        width: 100%;
                        margin-top: 10px;
                        gap: 10px;
                    }


                    .title-box {
                        display: flex;
                        padding: 5px;
                        background-color: white;
                        border-radius: 8px;
                        box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
                        margin-bottom: 10px;
                        justify-content: space-between;

                    }

                    .title-item {
                        display: flex;
                        align-items: center;

                        /* Align title and value on the same row */
                    }

                    .title-item span {
                        font-size: 18px;
                        font-weight: bold;
                        color: #004b5d;
                    }


                    @keyframes open {
                        from {
                            width: 20px;
                            /* Start with 0 width */
                        }

                        to {
                            width: 573px;
                            /* Animate to 473px width */
                        }
                    }

                    /* Responsive styling for smaller screens */
                    @media (max-width: 768px) {
                        .title-box {
                            flex-direction: column;
                            /* Stack items vertically on smaller screens */
                            align-items: flex-start;
                        }

                        .title-item {
                            margin-bottom: 15px;
                            /* Space between stacked items */
                        }
                    }
                </style>

                <!-- CSS for Modal -->
                <style>
                    .modal {
                        display: none;
                        position: fixed;
                        z-index: 1000;
                        left: 0;
                        top: 0;
                        width: 100%;
                        height: 100%;
                        overflow: auto;
                        background: rgba(255, 255, 255, 0.1);
                        backdrop-filter: blur(10px);
                        justify-content: center;
                    }


                    .modal-content {
                        background-color: white;
                        margin: auto;
                        padding: 20px;
                        border-radius: 10px;
                        box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
                        width: 80%;
                    }

                    .close-button {
                        color: #aaa;
                        float: right;
                        font-size: 28px;
                        font-weight: bold;
                        cursor: pointer;
                    }
                </style>

            </div>

            <div class="records">

                <div class="table-responsive" id="projectTable">

                    <table class="table table-main" width="100%" id="invoiceTable">
                        <thead>
                            <tr>
                                <th class="text-left" style="display: none;" scope="col">ID</th>
                                {% if user_access['toggleprofEditpurSupplier'] == 'On' %}
                                <th class="text-left" scope="col">Edit</th>
                                {% endif %}
                                <th class="text-left" scope="col">Vendor ID</th>
                                <th class="text-left" scope="col">Display Name </th>
                                <th class="text-left" scope="col">Reg No</th>
                                <th class="text-left" scope="col">Office No </th>
                                <th class="text-left" scope="col">Website</th>
                                <th class="text-left" scope="col">Contact</th>
                                <th class="text-left" scope="col">Email</th>
                                <th class="text-left" scope="col">Mobile</th>

                                {% if user_access['toggleprofDeletepurSupplier'] == 'On' %}
                                <th class="text-center" scope="col">Del</th>
                                {% endif %}

                            </tr>
                        </thead>

                        <tbody>
                            {% for vendor in vendors %}
                            <tr>
                                <td class="text-center" style="display: none;">{{ vendor.id }}</td>

                                {% if user_access['toggleprofEditpurSupplier'] == 'On' %}

                                <td class="text-center">

                                    <a href="#"
                                        onclick="getInvoiceDetails('{{ vendor.vendor_code }}', '{{ vendor.reg_no }}', 
                                                     '{{ vendor.company_name }}', '{{ vendor.display_name }}', 
                                                     '{{ vendor.office_no }}', '{{ vendor.website }}', 
                                                     '{{ vendor.billing_address1 }}', '{{ vendor.billing_address2 }}', 
                                                     '{{ vendor.city }}', '{{ vendor.state }}', 
                                                     '{{ vendor.country }}', '{{ vendor.postcode }}', 
                                                     '{{ vendor.bank_name }}', '{{ vendor.tax_id }}', 
                                                     '{{ vendor.branch_details }}', '{{ vendor.currency }}', 
                                                     '{{ vendor.pay_terms }}', '{{ vendor.account_no }}',
                                                     '{{ vendor.swift }}', '{{ vendor.ifsc }}',
                                                     '{{ vendor.contact1 }}', '{{ vendor.email1 }}', 
                                                     '{{ vendor.mobile1 }}', '{{ vendor.contact2 }}', 
                                                     '{{ vendor.email2 }}', '{{ vendor.mobile2 }}', 
                                                     '{{ vendor.contact3 }}', '{{ vendor.email3 }}', 
                                                     '{{ vendor.mobile3 }}', '{{ vendor.product_catgory }}', '{{ vendor.brand }}',  '{{ vendor.Details }}')">
                                        <span class="icon">
                                            <span class="fa-solid fa-edit" style="font-size: 1em;"></span>
                                        </span>
                                    </a>

                                </td>
                                {% endif %}

                                <td class="text-center">{{ vendor.vendor_code }}</td>

                                <td class="text-center">
                                    {% if vendor.display_name %}
                                    {{ vendor.display_name[:15] }}{% if vendor.display_name|length > 15 %}...{% endif %}
                                    {% endif %}
                                </td>

                                <td class="text-center">{{ vendor.reg_no if vendor.reg_no else '' }}</td>

                                <td class="text-center">
                                    {{ vendor.office_no|string|truncate(10, True, '...') }}
                                </td>

                                <td class="text-center">
                                    {% if vendor.website %}
                                    {{ vendor.website[:20] }}{% if vendor.website|length > 20 %}...{% endif %}
                                    {% else %}
                                    &nbsp;
                                    {% endif %}
                                </td>

                                <td class="text-center">{{ vendor.contact1 if vendor.contact1 else '' }}</td>

                                <td class="text-center">
                                    {% if vendor.email1 %}
                                    {{ vendor.email1[:15] }}{% if vendor.email1|length > 15 %}...{% endif %}
                                    {% else %}
                                    &nbsp;
                                    {% endif %}
                                </td>

                                <td class="text-center">{{ vendor.mobile1 if vendor.mobile1 else '' }}</td>


                                {% if user_access['toggleprofDeletepurSupplier'] == 'On' %}
                                <td class="text-center">
                                    <a href="/prof_suppliers_del?id={{ vendor.id }}"
                                        onclick="return confirm('Are you sure you want to delete this Vendor Permanently?');">
                                        <span class="icon">
                                            <span class="fa-solid fa-trash"
                                                style="color: red; font-size: 1.2em;"></span>
                                        </span>
                                    </a>
                                </td>
                                {% endif %}

                            </tr>
                            {% endfor %}
                        </tbody>
                    </table>

                </div>

                <script>
                    function getInvoiceDetails(vendor_code, reg_no, company_name, display_name, office_no, website, billing_address1, billing_address2, city,
                        state, country, postcode, bank_name, tax_id, branch_details, currency, pay_terms, account_no,
                        swift, ifsc, contact1, email1, mobile1, contact2, email2, mobile2, contact3, email3, mobile3, product_catgory, brand, Details) {
                        document.getElementById("modal").style.display = "block";


                        // Populate form fields
                        document.getElementById('vendor_code').value = vendor_code;
                        document.getElementById('reg_no').value = reg_no;
                        document.getElementById('company_name').value = company_name;
                        document.getElementById('display_name').value = display_name;
                        document.getElementById('office_no').value = office_no;
                        document.getElementById('website').value = website;
                        document.getElementById('billing_address1').value = billing_address1;
                        document.getElementById('billing_address2').value = billing_address2;
                        document.getElementById('city').value = city;
                        document.getElementById('state').value = state;
                        document.getElementById('country').value = country;
                        document.getElementById('postcode').value = postcode;
                        document.getElementById('bank_name').value = bank_name;
                        document.getElementById('tax_id').value = tax_id;
                        document.getElementById('branch_details').value = branch_details;
                        document.getElementById('currency').value = currency;
                        document.getElementById('pay_terms').value = pay_terms;
                        document.getElementById('account_no').value = account_no;
                        document.getElementById('swift').value = swift;
                        document.getElementById('ifsc').value = ifsc;
                        document.getElementById('contact1').value = contact1;
                        document.getElementById('email1').value = email1;
                        document.getElementById('mobile1').value = mobile1;
                        document.getElementById('contact2').value = contact2;
                        document.getElementById('email2').value = email2;
                        document.getElementById('mobile2').value = mobile2;
                        document.getElementById('contact3').value = contact3;
                        document.getElementById('email3').value = email3;
                        document.getElementById('mobile3').value = mobile3;
                        document.getElementById('Product_Category').value = product_catgory;
                        document.getElementById('Brands').value = brand;
                        document.getElementById('Details').value = Details;

                    }
                </script>

                <script>

                    function searchTable() {
                        var invoiceSearch = document.getElementById("invoiceSearch").value.toLowerCase();
                        var poSearch = document.getElementById("poSearch").value.toLowerCase();
                        var rows = document.querySelectorAll(".table-main tbody tr");

                        rows.forEach(function (row, index) {
                            var invoiceNo = row.cells[1].textContent.toLowerCase();
                            var poNumber = row.cells[2].textContent.toLowerCase();
                            var isVisible = invoiceNo.indexOf(invoiceSearch) > -1 && poNumber.indexOf(poSearch) > -1;

                            // Show or hide the row based on the search filters
                            row.style.display = isVisible ? "" : "none";

                            // Show or hide sub-table based on row visibility
                            var subTable = document.getElementById("subTable" + index);
                            if (subTable && isVisible) {
                                subTable.style.display = subTable.style.display === "none" ? "" : "none";
                            }
                        });
                    }

                    // Toggle sub-table visibility when clicking the button
                    function toggleSubTable(subTableId, buttonId) {
                        var subTable = document.getElementById(subTableId);
                        var button = document.getElementById(buttonId);
                        if (subTable.style.display === "none") {
                            subTable.style.display = "";
                            button.innerHTML = '<ion-icon name="chevron-up-outline"></ion-icon>';
                        } else {
                            subTable.style.display = "none";
                            button.innerHTML = '<ion-icon name="chevron-down-outline"></ion-icon>';
                        }
                    }

                </script>

            </div>

        </div>

    </div>



    <style>
        .table-responsive12 {
            width: 100%;
            overflow: auto;
            max-height: 350px;
        }

        .page-content1 {
            padding: 0.0rem 1rem;
            margin-top: 0px;
            background: #f1f4f9;
            width: 100%;
        }

        .record-header7 {
            display: flex;
            flex-direction: row;
            flex-wrap: wrap;
            align-content: space-around;
            align-items: center;
            gap: 10px;
            width: 100%;
            /* Ensure the header takes full width */
        }

        .main_box {
            background-color: white;
            border-radius: 5px;
            min-height: 270px;
            padding: 10px;
            flex: 1;
            /* Make each child element take up equal space within the parent */
            box-sizing: border-box;
            /* Ensure padding is included in the element's width */
        }




        .table thead th:nth-child(3),
        .table tbody td:nth-child(3),
        .table thead th:nth-child(4),
        .table tbody td:nth-child(4),
        .table thead th:nth-child(5),
        .table tbody td:nth-child(5),
        .table thead th:nth-child(6),
        .table tbody td:nth-child(6),
        .table thead th:nth-child(7),
        .table tbody td:nth-child(7),
        .table thead th:nth-child(8),
        .table tbody td:nth-child(8),
        .table thead th:nth-child(3),
        .table tbody td:nth-child(3) {
            text-align: left;
        }

        .table thead th:nth-child(1),
        .table tbody td:nth-child(1),
        .table thead th:nth-child(2),
        .table tbody td:nth-child(2),

        .table thead th:nth-child(11),
        .table tbody td:nth-child(11) {
            text-align: center;
        }


        .content-table .fa-trash,
        .fa-edit {
            font-size: 1.2em;
        }



        .flex-item-full-width {
            flex: 1;
        }

        .flex-row {
            display: flex;
            flex-direction: row;
            justify-content: space-between;
            gap: 15px;
            /* Optional: add spacing between flex items within .flex-row */
        }

        input[type=text],
        input[type=date],
        input[type=number],
        select {
            width: 100%;
            padding: 10px 20px;
            margin: 2px 0;
            /* Reduce the top and bottom margin */
            display: block;
            border: 1px solid #ccc;
            border-radius: 4px;
            box-sizing: border-box;
        }

        /* Responsive styles */
        @media (max-width: 768px) {
            .record-header7 {
                padding: 0.5rem;
                flex-direction: column;
                /* Stack the header content vertically */
            }

            .flex-row {
                flex-direction: column;
                /* Stack flex items vertically */
                gap: 10px;
                /* Adjust gap for smaller screens */
            }

            .main_box {
                padding: 5px;
                /* Reduce padding for smaller screens */
            }

            .content-table .fa-trash,
            .fa-edit {
                font-size: 1em;
                /* Adjust icon size for smaller screens */
            }

            input[type=text],
            input[type=date],
            input[type=number],
            select {
                padding: 8px 15px;
                /* Reduce padding for smaller screens */
            }

            /* Adjust table column widths for better readability */
            .table thead th,
            .table tbody td {
                padding: 5px;
                /* Reduce cell padding */
                font-size: 0.9em;
                /* Reduce font size */
            }
        }

        @media (max-width: 480px) {
            .record-header7 {
                padding: 0.25rem;
            }

            .flex-row {
                gap: 5px;
                /* Further reduce gap for very small screens */
            }

            .content-table .fa-trash,
            .fa-edit {
                font-size: 0.9em;
                /* Further adjust icon size */
            }

            input[type=text],
            input[type=date],
            input[type=number],
            select {
                padding: 6px 10px;
                /* Further reduce padding */
            }

            /* Further adjust table column widths */
            .table thead th,
            .table tbody td {
                padding: 3px;
                font-size: 0.8em;
                /* Further reduce font size */
            }
        }
    </style>

    <script>
        // Function to format a date string as 'day/month/year' with digits only
        function formatDate(dateString) {
            const date = new Date(dateString);
            if (isNaN(date.getTime())) {
                // Return an empty string for invalid dates
                return '';
            }

            const day = date.getDate().toString().padStart(2, '0');
            const month = (date.getMonth() + 1).toString().padStart(2, '0'); // Adding 1 because months are zero-based
            const year = date.getFullYear().toString().slice(-2);

            return `${day}/${month}/${year}`;
        }

        // Call the formatDate function for each date element when the page loads
        document.addEventListener("DOMContentLoaded", function () {
            const start_time_elements = document.querySelectorAll(".start-time");
            const end_time_elements = document.querySelectorAll(".end-time");

            start_time_elements.forEach(function (element) {
                element.textContent = formatDate(element.textContent);
            });

            end_time_elements.forEach(function (element) {
                element.textContent = formatDate(element.textContent);
            });
        });
    </script>
</body>

</html>